<html>
<head>
    <title>leaflet building</title>   
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
    <link href="https://cdn.osmbuildings.org/4.0.0/OSMBuildings.css" rel="stylesheet">
    <script src="https://cdn.osmbuildings.org/4.0.0/OSMBuildings.js"></script>
    <style type="text/css">
        html,
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }
        #map {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<div class="map" id="map"></div>
<script type="text/javascript">
    // 定义地图
    var map = new OSMBuildings({
        container: 'map',
        // position: { latitude: 52.52128, longitude: 13.40894 },
        position: { latitude: 52.52128, longitude: 13.40894 },
        // zoom: 16,
        // minZoom: 15,
        // maxZoom: 20,
        tilt: 40,
        rotation: 300,
        effects: ['shadows'],
        attribution: 'attribution',
        zoomDelta: 0.25,
        zoomSnap: 0,
        minZoom: 4.5,
        maxZoom: 12,
        zoom: 4,
        center: [30.050709,113.870062],
    });
    // 添加OSM瓦片
    map.addMapTiles('https://tile.openstreetmap.org/{z}/{x}/{y}.png');
    // 添加OSM建筑物真型
    map.addGeoJSONTiles('https://{s}.data.osmbuildings.org/0.2/dixw8kmb/tile/{z}/{x}/{y}.json');
    //不停旋转
    let rotation = 0;
    function rotate() {
        map.setRotation(rotation);
        rotation = (rotation + 1) % 360;
        requestAnimationFrame(rotate);
    }
    // 要是转得头晕，把下面这行注释掉，真的头晕
    // rotate();
</script>
</body>
</html>
